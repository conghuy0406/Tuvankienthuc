@using Tuvankienthuc.ML
@{
    ViewData["Title"] = "Train AI Model";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";

    var result = ViewBag.Result as TrainResultVm;
}

<div class="container py-4">

    <h2 class="fw-bold text-danger mb-3">
        <i class="bi bi-cpu"></i> Huấn luyện mô hình AI
    </h2>

    <!-- FORM TRAIN -->
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
            <form asp-action="TrainModel" method="post">
                @Html.AntiForgeryToken()

                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Mã môn học (tuỳ chọn)
                    </label>
                    <input name="maMH"
                           class="form-control"
                           placeholder="VD: 1 (để trống = train toàn bộ)" />

                    <div class="text-muted small mt-1">
                        Nếu để trống, hệ thống sẽ train trên toàn bộ dữ liệu học tập.
                    </div>
                </div>

                <button class="btn btn-primary">
                    <i class="bi bi-play-fill"></i> Bắt đầu huấn luyện
                </button>
            </form>
        </div>
    </div>

    <!-- KẾT QUẢ TRAIN -->
    @if (result != null)
    {
        <div class="card shadow-sm border-0">
            <div class="card-header bg-success text-white fw-bold">
                ✅ Kết quả train
            </div>
            <div class="card-body">
                <p><strong>R²:</strong> @result.R2.ToString("0.000")</p>
                <p><strong>RMSE:</strong> @result.RMSE.ToString("0.000")</p>
                <p><strong>MAE:</strong> @result.MAE.ToString("0.000")</p>
                <hr />
                <p><strong>Data:</strong> @result.DataPath</p>
                <p><strong>Model:</strong> @result.ModelPath</p>
                <p class="text-muted">@result.Note</p>
            </div>
        </div>
    }

</div>
